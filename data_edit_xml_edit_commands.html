
<div style="width: 80em">

<h1>Editing Dita using Geany or PCD</h1>

<p><a format="html" href="https://metacpan.org/pod/Data::Edit::Xml">Data::Edit::Xml</a> is a Perl extension module that can help you edit <a format="html" href="http://docs.oasis-open.org/dita/dita/v1.3/os/part2-tech-content/dita-v1.3-os-part2-tech-content.html">Dita</a> either
interactively using <a format="html" href="https://www.geany.org">Geany</a> or in batch using <a format="html" href="https://metacpan.org/pod/Dita::PCD">Dita::PCD</a> files.

<h2>Configuring Geany to Edit Dita and PCD</h2>

<p>Please obtain a version of <a format="html" href="https://ubuntu.com/download/desktop">Ubuntu 18</a> and follow the instructions at
<a format="html" href="https://github.com/philiprbrenan/philiprbrenan.github.io/blob/master/pcd_installation.md">PCD installation</a>.

<h2>Editing Dita interactively with Geany</h2>

<p>You can use many of the methods found in <a format="html" href="https://metacpan.org/pod/Data::Edit::Xml">Data::Edit::Xml</a> one at a time directly from
the <a format="html" href="https://www.geany.org">Geany</a> editor when it has been configured for <a format="html" href="http://docs.oasis-open.org/dita/dita/v1.3/os/part2-tech-content/dita-v1.3-os-part2-tech-content.html">Dita</a> editing. The
methods executed are recorded in log visible in another <a format="html" href="https://www.geany.org">Geany</a> tab so that
they can be edited directly into a program that is being developed to use
<a format="html" href="https://metacpan.org/pod/Data::Edit::Xml">Data::Edit::Xml</a> directly from <a format="html" href="http://www.perl.org/">Perl</a> or from <a format="html" href="https://metacpan.org/pod/Dita::PCD">Dita::PCD</a>.

<p>The table below lists the methods that can be used in <a format="html" href="https://www.geany.org">Geany</a>.  Simply type
the method name and any parameters up against a closing <b>&gt;</b> or
<b>&gt;</b> as shown on line <b> 13 </b> like this:

<p><img src="/images/mlp_start.png"/>

<p>and press <b> shift+Enter </b> to merge the two lists:

<p><img src="/images/mlp_finish.png"/>


<h2>Editing Dita in batch using PCD</h2>

<p><a format="html" href="https://metacpan.org/pod/Dita::PCD">Dita::PCD</a> files contain a list of <a format="html" href="https://metacpan.org/pod/Data::Edit::Xml">Data::Edit::Xml</a> commands, one per line, that are applied
to each node of each of the parse trees produced by parsing all of the <a format="html" href="http://docs.oasis-open.org/dita/dita/v1.3/os/part2-tech-content/dita-v1.3-os-part2-tech-content.html">Dita</a>
files found in the same directory tree as the <a format="html" href="https://metacpan.org/pod/Dita::PCD">Dita::PCD</a> file.

<p><a href="https://github.com/philiprbrenan/pleaseChangeDita">This
repository</a> contains two <a format="html" href="http://docs.oasis-open.org/dita/dita/v1.3/os/part2-tech-content/dita-v1.3-os-part2-tech-content.html">Dita</a> <a format="html" href="http://docs.oasis-open.org/dita/dita/v1.3/errata02/os/complete/part3-all-inclusive/langRef/technicalContent/concept.html#concept">Dita Concept</a>s and one <a format="html" href="https://metacpan.org/pod/Dita::PCD">Dita::PCD</a> file. The <a format="html" href="https://metacpan.org/pod/Dita::PCD">Dita::PCD</a>
file unwraps a <b>b</b> tag found under another <b>b</b> tag.

<p>There are four types of line in a <a format="html" href="https://metacpan.org/pod/Dita::PCD">Dita::PCD</a> file:

<p><pre>
1
2   # Comment
3   Unwrap b under b and delete empty paragraphs
4        unwrap b b
5        cutIfEmpty p
</pre></p>

<table cellpadding="20" border="0">
<tr><th>Line<th>Name<th>Description

<tr><td>1<td>Blank lines      <td>Blank lines are ignored

<tr><td>2<td>Comment lines    <td>If the first non space character is <b>#</b>
then this is a comment line and it is ignored.

<tr><td>3<td>Description lines<td>If the first character is not a space it is a
description line whose purpose is to communicate with other humans what the
following commands aim to do.

<tr><td>4<td>Command lines    <td>If the first character is a space then the
rest of the line is command line: a method name chosen from <a format="html" href="https://metacpan.org/pod/Data::Edit::Xml">Data::Edit::Xml</a> followed by
any parameters separated from each other by one or more spaces.

</table>

<p>Each <a format="html" href="https://metacpan.org/pod/Dita::PCD">Dita::PCD</a> file can contain zero or more description lines. Each description
line can be followed by zero or more command lines called a "block of command
lines" or "block" for short. <a format="html" href="https://metacpan.org/pod/Dita::PCD">Dita::PCD</a> executes each block against each node in
each of the parse trees constructed by parsing all of the <a format="html" href="http://docs.oasis-open.org/dita/dita/v1.3/os/part2-tech-content/dita-v1.3-os-part2-tech-content.html">Dita</a> files found
in the same folder as the <a format="html" href="https://metacpan.org/pod/Dita::PCD">Dita::PCD</a> files.  Execution of the block continues line
by line until the end of the block or the <a format="html" href="https://metacpan.org/pod/Data::Edit::Xml">Data::Edit::Xml</a> method fails. If the block
completes successfully, the description line for that block is printed out to
show that it "fired".

<p><a format="html" href="https://www.geany.org">Geany</a> on <a format="html" href="https://ubuntu.com/download/desktop">Ubuntu 18</a> has been configured as an <a format="html" href="https://en.wikipedia.org/wiki/Integrated_development_environment">IDE</a> to make editing both
<a format="html" href="https://metacpan.org/pod/Dita::PCD">Dita::PCD</a> and test <a format="html" href="http://docs.oasis-open.org/dita/dita/v1.3/os/part2-tech-content/dita-v1.3-os-part2-tech-content.html">Dita</a> files a pleasant experience with all the usual
facilities provided by such an <a format="html" href="https://en.wikipedia.org/wiki/Integrated_development_environment">IDE</a> such as help choosing command names,
testing the syntax of <a format="html" href="https://metacpan.org/pod/Dita::PCD">Dita::PCD</a> files once they are written, then executing
them against <a format="html" href="http://docs.oasis-open.org/dita/dita/v1.3/os/part2-tech-content/dita-v1.3-os-part2-tech-content.html">Dita</a> files and showing the execution results.</p>

<p>You can also place <a format="html" href="https://metacpan.org/pod/Dita::PCD">Dita::PCD</a> files into the same <a format="html" href="https://s3.console.aws.amazon.com/s3/home">S3</a> Bucket or <a format="html" href="https://github.com">GitHub</a> repo
as your <a format="html" href="http://docs.oasis-open.org/dita/dita/v1.3/os/part2-tech-content/dita-v1.3-os-part2-tech-content.html">Dita</a> files and then process them in bulk with <a format="html" href="https://philiprbrenan.github.io/selfServiceXref.pdf">Self Xref</a>.

<h1>Methods in Data::Edit::Xml that can be used to Edit Dita using Geany or PCD</h1>

<h2>Immediately useful methods</h2>

<table border="0" cellpadding="20">
<tr><th align="left">Line<th align="left">Method long name<th align="left">aka<th align="left">Parameter<th align="left">Description

<tr><td>1<td>at<td><b></b><td><td>Confirm that the specified $𝗻𝗼𝗱𝗲 has the specified L<ancestry|/ancestry> and
return the specified $𝗻𝗼𝗱𝗲 if it does else 𝘂𝗻𝗱𝗲𝗳. Ancestry is specified by
providing the expected tags that the $𝗻𝗼𝗱𝗲's parent, the parent's parent etc.
must match at each level. If 𝘂𝗻𝗱𝗲𝗳 is specified then any tag is assumed to match
at that level. If a regular expression is specified then the current parent node
tag must match the regular expression at that level. If all supplied tags match
successfully then the starting node is returned else 𝘂𝗻𝗱𝗲𝗳

<tr><td><td><td><td>@context<td>Ancestry.
<tr><td>2<td>change<td><b>cc</b><td><td>Change the name of the specified $𝗻𝗼𝗱𝗲, optionally confirming that the $𝗻𝗼𝗱𝗲 is
in a specified context and return the $𝗻𝗼𝗱𝗲.

<tr><td><td><td><td>$name<td>New name
<tr><td><td><td><td>@context<td>Optional context.
<tr><td>3<td>go<td><b></b><td><td>Return the node reached from the specified $𝗻𝗼𝗱𝗲 via the specified
L<path|/path>: (index position?)* where index is the tag of the next node to be
chosen and position is the optional zero based position within the index of
those tags under the current node. Position defaults to zero if not specified.
Position can also be negative to index back from the top of the index array. *
can be used as the last position to retrieve all nodes with the final tag.

<tr><td><td><td><td>@path<td>Search specification.
<tr><td>4<td>prettyString<td><b></b><td><td>Return a readable string representing a node of a L<parse|/parse> tree and all
the nodes below it. Or use L<-p|/opString> $node

<tr><td><td><td><td>$depth<td>Optional depth.
<tr><td>5<td>splitAndWrapToEnd<td><b></b><td><td>Split the sequence of child nodes under the specified $𝗽𝗮𝗿𝗲𝗻𝘁 node on those
child nodes whose tag value is $𝘀𝗽𝗹𝗶𝘁 wrapping the splitting node and all
following nodes up until the next splitting node or the end of the sequence with
newly created nodes whose tag is $𝘄𝗿𝗮𝗽 with optional attributes %𝗮𝘁𝘁𝗿𝗶𝗯𝘂𝘁𝗲𝘀.
Returns an array of the wrapping nodes so created.

<tr><td><td><td><td>$split<td>Tag of splitting nodes
<tr><td><td><td><td>$wrap<td>Tag for wrapping node
<tr><td><td><td><td>%attributes<td>Attributes for wrapping nodes
<tr><td>6<td>unwrap<td><b>u</b><td><td>Unwrap the specified $𝗻𝗼𝗱𝗲 by inserting its content into its parent at the point
containing the specified $𝗻𝗼𝗱𝗲 and return the parent node. Returns 𝘂𝗻𝗱𝗲𝗳 if an
attempt is made to unwrap a text node. Confesses if an attempt is made to unwrap
the root node.

<tr><td><td><td><td>@context<td>Optional context.
<tr><td>7<td>wrapWith<td><b></b><td><td>Wrap the specified $𝗻𝗼𝗱𝗲 in a new node created from the specified $𝘁𝗮𝗴 and
%𝗮𝘁𝘁𝗿𝗶𝗯𝘂𝘁𝗲𝘀 forcing the specified $𝗻𝗼𝗱𝗲 down - deepening the L<parse|/parse>
tree - return the new wrapping node. See L<addWrapWith|/addWrapWith> to perform
this operation conditionally.

<tr><td><td><td><td>$tag<td>Tag for the new node or tag
<tr><td><td><td><td>%attributes<td>Attributes for the new node or tag.
</table>

<h2>All methods</h2>

<table border="0" cellpadding="20">
<tr><th align="left">Line<th align="left">Method long name<th align="left">aka<th align="left">Parameter<th align="left">Description

<tr><td>1<td>at<td><b></b><td><td>Confirm that the specified $𝗻𝗼𝗱𝗲 has the specified L<ancestry|/ancestry> and
return the specified $𝗻𝗼𝗱𝗲 if it does else 𝘂𝗻𝗱𝗲𝗳. Ancestry is specified by
providing the expected tags that the $𝗻𝗼𝗱𝗲's parent, the parent's parent etc.
must match at each level. If 𝘂𝗻𝗱𝗲𝗳 is specified then any tag is assumed to match
at that level. If a regular expression is specified then the current parent node
tag must match the regular expression at that level. If all supplied tags match
successfully then the starting node is returned else 𝘂𝗻𝗱𝗲𝗳

<tr><td>2<td>change<td><b>cc</b><td><td>Change the name of the specified $𝗻𝗼𝗱𝗲, optionally confirming that the $𝗻𝗼𝗱𝗲 is
in a specified context and return the $𝗻𝗼𝗱𝗲.

<tr><td><td><td><td>@context<td>Optional context.
<tr><td>3<td>go<td><b></b><td><td>Return the node reached from the specified $𝗻𝗼𝗱𝗲 via the specified
L<path|/path>: (index position?)* where index is the tag of the next node to be
chosen and position is the optional zero based position within the index of
those tags under the current node. Position defaults to zero if not specified.
Position can also be negative to index back from the top of the index array. *
can be used as the last position to retrieve all nodes with the final tag.

<tr><td>4<td>prettyString<td><b></b><td><td>Return a readable string representing a node of a L<parse|/parse> tree and all
the nodes below it. Or use L<-p|/opString> $node

<tr><td>5<td>splitAndWrapToEnd<td><b></b><td><td>Split the sequence of child nodes under the specified $𝗽𝗮𝗿𝗲𝗻𝘁 node on those
child nodes whose tag value is $𝘀𝗽𝗹𝗶𝘁 wrapping the splitting node and all
following nodes up until the next splitting node or the end of the sequence with
newly created nodes whose tag is $𝘄𝗿𝗮𝗽 with optional attributes %𝗮𝘁𝘁𝗿𝗶𝗯𝘂𝘁𝗲𝘀.
Returns an array of the wrapping nodes so created.

<tr><td><td><td><td>$wrap<td>Tag for wrapping node
<tr><td><td><td><td>%attributes<td>Attributes for wrapping nodes
<tr><td>6<td>unwrap<td><b>u</b><td><td>Unwrap the specified $𝗻𝗼𝗱𝗲 by inserting its content into its parent at the point
containing the specified $𝗻𝗼𝗱𝗲 and return the parent node. Returns 𝘂𝗻𝗱𝗲𝗳 if an
attempt is made to unwrap a text node. Confesses if an attempt is made to unwrap
the root node.

<tr><td>7<td>wrapWith<td><b></b><td><td>Wrap the specified $𝗻𝗼𝗱𝗲 in a new node created from the specified $𝘁𝗮𝗴 and
%𝗮𝘁𝘁𝗿𝗶𝗯𝘂𝘁𝗲𝘀 forcing the specified $𝗻𝗼𝗱𝗲 down - deepening the L<parse|/parse>
tree - return the new wrapping node. See L<addWrapWith|/addWrapWith> to perform
this operation conditionally.

<tr><td><td><td><td>%attributes<td>Attributes for the new node or tag.
</table>

<p>Updated: 2019-08-26 at 23:56:52
</div>
